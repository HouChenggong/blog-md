## ES

### ES集群和单个节点

群集是一个或多个节点（服务器）的集合，这些节点一起保存您的全部数据，并在所有节点之间提供联合索引和搜索功能。集群由唯一名称标识，默认情况下为“ elasticsearch“

节点是单个服务器，它是群集的一部分，存储数据并参与群集的索引和搜索功能。就像群集一样，节点由名称标识，该名称默认为在启动时分配给该节点的随机通用唯一标识符（UUID）

### 搜索API

对于响应，我们看到以下部分：

- `took` – Elasticsearch执行搜索的时间（以毫秒为单位）
- `timed_out` –告诉我们搜索是否超时
- `_shards` –告诉我们搜索了多少个分片，以及成功/失败的搜索分片的数量
- `hits` - 搜索结果
- `hits.total` –符合我们搜索条件的文档总数
- `hits.hits` –搜索结果的实际数组（默认为前10个文档）
- `hits.sort` -结果排序键（如果按得分排序则丢失）
- `hits._score`并且`max_score`-现在暂时忽略这些字段

```json
{
  "took" : 63,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "skipped" : 0,
    "failed" : 0
  },
  "hits" : {
    "total" : 1000,
    "max_score" : null,
    "hits" : [ {
      "_index" : "bank",
      "_type" : "_doc",
      "_id" : "0",
      "sort": [0],
      "_score" : null,
      "_source" : {"account_number":0,"balance":16623,"firstname":"Bradshaw","lastname":"Mckenzie","age":29,"gender":"F","address":"244 Columbus Place","employer":"Euron","email":"bradshawmckenzie@euron.com","city":"Hobucken","state":"CO"}
    }, {
      "_index" : "bank",
      "_type" : "_doc",
      "_id" : "1",
      "sort": [1],
      "_score" : null,
      "_source" : {"account_number":1,"balance":39225,"firstname":"Amber","lastname":"Duke","age":32,"gender":"M","address":"880 Holmes Lane","employer":"Pyrami","email":"amberduke@pyrami.com","city":"Brogan","state":"IL"}
    }, ...
    ]
  }
}
```

### JavaHighLevelRestClient

1. 执行搜索的API

```java

    @Autowired
    private RestHighLevelClient restHighLevelClient; 

SearchResponse response = restHighLevelClient.search(request, RequestOptions.DEFAULT);

//下面是API
SearchResponse search(SearchRequest searchRequest, RequestOptions options) 
```

2. 执行搜索的时候需要一个`SearchRequest`，也就是一个查询需要
   - 直接new一个

```java
 SearchRequest request = new SearchRequest();
```

